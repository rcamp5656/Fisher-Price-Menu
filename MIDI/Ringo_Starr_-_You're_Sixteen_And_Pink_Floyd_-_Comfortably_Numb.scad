/* This file has been generated by "music box tune tracker" v1.0 on 18 Jul 2024 12:45
 * https://github.com/odrevet/music-box-tune-tracker
 * using "Fred's Fisher Price record creator" .scad template file
 * http://www.instructables.com/id/3D-printing-records-for-a-Fisher-Price-toy-record-/
 */

// writing functions by HarlanDMii
// http://www.thingiverse.com/thing:16193
use <Write.scad>

// Configuration
$fn = 100;
hStock = 5.0;
rStock = 60.58;
oDrive = 21.8;
rDrive = 1.55;
hInset = 1;
rInset = 25.6;
hGroove = 1.2;
overlap = 0.2;

hasSecondSide = 1;

// Create disc
module createDisc() {
	union() {

		createBlank();

		// Add the notes for the song. This part is dynamically generated.
		pin(27.95,29.15,50.41889927503139,0);
		pin(27.95,29.15,62.97703880991511,0);
		pin(27.95,29.15,67.16308532154302,0);
		pin(27.95,29.15,71.34913183317093,0);
		pin(27.95,29.15,75.53517834479882,0);
		pin(27.95,29.15,79.72122485642674,0);
		pin(27.95,29.15,83.90727136805465,0);
		pin(27.95,29.15,88.09331787968256,0);
		pin(27.95,29.15,92.27936439131047,0);
		pin(27.95,29.15,96.46541090293837,0);
		pin(27.95,29.15,100.6514574145663,0);
		pin(27.95,29.15,104.83750392619419,0);
		pin(27.95,29.15,109.0235504378221,0);
		pin(27.95,29.15,113.20959694945,0);
		pin(27.95,29.15,117.39564346107791,0);
		pin(27.95,29.15,121.58168997270585,0);
		pin(27.95,29.15,125.76773648433372,0);
		pin(27.95,29.15,129.95378299596163,0);
		pin(27.95,29.15,134.13982950758952,0);
		pin(27.95,29.15,138.32587601921745,0);
		pin(27.95,29.15,142.51192253084537,0);
		pin(27.95,29.15,146.69796904247323,0);
		pin(27.95,29.15,150.88401555410118,0);
		pin(27.95,29.15,155.07006206572905,0);
		pin(27.95,29.15,159.256108577357,0);
		pin(27.95,29.15,163.44215508898492,0);
		pin(27.95,29.15,167.62820160061278,0);
		pin(27.95,29.15,171.8142481122407,0);
		pin(27.95,29.15,176.0002946238686,0);
		pin(27.95,29.15,180.1863411354965,0);
		pin(27.95,29.15,184.37238764712444,0);
		pin(27.95,29.15,188.55843415875233,0);
		pin(27.95,29.15,192.74448067038026,0);
		pin(27.95,29.15,196.93052718200812,0);
		pin(27.95,29.15,201.11657369363604,0);
		pin(27.95,29.15,205.302620205264,0);
		pin(27.95,29.15,209.48866671689183,0);
		pin(27.95,29.15,213.67471322851978,0);
		pin(27.95,29.15,217.8607597401477,0);
		pin(27.95,29.15,222.04680625177556,0);
		pin(27.95,29.15,226.23285276340349,0);
		pin(27.95,29.15,230.41889927503138,0);
		pin(27.95,29.15,234.60494578665933,0);
		pin(27.95,29.15,238.7909922982872,0);
		pin(27.95,29.15,242.97703880991511,0);
		pin(27.95,29.15,247.16308532154304,0);
		pin(27.95,29.15,251.3491318331709,0);
		pin(27.95,29.15,255.53517834479885,0);
		pin(27.95,29.15,259.7212248564267,0);
		pin(27.95,29.15,263.90727136805464,0);
		pin(27.95,29.15,268.09331787968256,0);
		pin(27.95,29.15,272.2793643913104,0);
		pin(27.95,29.15,276.4654109029384,0);
		pin(27.95,29.15,280.65145741456627,0);
		pin(27.95,29.15,284.8375039261942,0);
		pin(27.95,29.15,289.0235504378221,0);
		pin(27.95,29.15,293.20959694945,0);
		pin(27.95,29.15,297.3956434610779,0);
		pin(27.95,29.15,301.58168997270576,0);
		pin(27.95,29.15,305.76773648433374,0);
		pin(27.95,29.15,309.95378299596166,0);
		pin(27.95,29.15,314.1398295075895,0);
		pin(27.95,29.15,318.32587601921745,0);
		pin(27.95,29.15,322.51192253084537,0);
		pin(27.95,29.15,326.69796904247323,0);
		pin(27.95,29.15,330.88401555410115,0);
		pin(27.95,29.15,335.0700620657291,0);
		pin(27.95,29.15,339.256108577357,0);
		pin(27.95,29.15,343.44215508898486,0);
		pin(27.95,29.15,347.6282016006128,0);
		pin(27.95,29.15,351.8142481122407,0);
		pin(29.15,30.349999999999998,155.20495938026974,0);
		pin(29.15,30.349999999999998,159.39100589189766,0);
		pin(29.15,30.349999999999998,176.1351919384093,0);
		pin(29.15,30.349999999999998,238.9258896128279,0);
		pin(29.15,30.349999999999998,243.1119361244558,0);
		pin(29.15,30.349999999999998,272.4142617058512,0);
		pin(29.15,30.349999999999998,331.0189128686419,0);
		pin(29.15,30.349999999999998,339.3910058918977,0);
		pin(29.15,30.349999999999998,343.5770524035256,0);
		pin(29.15,30.349999999999998,347.7630989151535,0);
		pin(29.15,30.349999999999998,351.94914542678146,0);
		pin(30.69,31.89,54.954075851348684,0);
		pin(30.69,31.89,59.1401223629766,0);
		pin(30.69,31.89,126.11686654902311,0);
		pin(30.69,31.89,130.302913060651,0);
		pin(30.69,31.89,134.48895957227893,0);
		pin(30.69,31.89,138.67500608390682,0);
		pin(30.69,31.89,142.86105259553474,0);
		pin(30.69,31.89,147.04709910716267,0);
		pin(30.69,31.89,151.23314561879056,0);
		pin(30.69,31.89,155.41919213041845,0);
		pin(30.69,31.89,159.60523864204637,0);
		pin(30.69,31.89,230.7680293397208,0);
		pin(30.69,31.89,243.32616887460455,0);
		pin(30.69,31.89,264.2564014327441,0);
		pin(30.69,31.89,272.6284944559999,0);
		pin(30.69,31.89,276.8145409676278,0);
		pin(30.69,31.89,281.00058747925567,0);
		pin(30.69,31.89,285.18663399088365,0);
		pin(31.89,33.09,50.880736203303435,0);
		pin(31.89,33.09,63.43887573818715,0);
		pin(31.89,33.09,113.67143387772202,0);
		pin(31.89,33.09,117.85748038934994,0);
		pin(31.89,33.09,122.04352690097788,0);
		pin(31.89,33.09,126.22957341260577,0);
		pin(31.89,33.09,168.09003852888486,0);
		pin(31.89,33.09,172.27608504051275,0);
		pin(31.89,33.09,176.46213155214065,0);
		pin(31.89,33.09,180.64817806376857,0);
		pin(31.89,33.09,184.8342245753965,0);
		pin(31.89,33.09,189.02027108702435,0);
		pin(31.89,33.09,193.20631759865228,0);
		pin(31.89,33.09,197.3923641102802,0);
		pin(31.89,33.09,318.7877129474895,0);
		pin(31.89,33.09,322.97375945911745,0);
		pin(31.89,33.09,331.34585248237323,0);
		pin(31.89,33.09,335.5318989940011,0);
		pin(31.89,33.09,339.717945505629,0);
		pin(31.89,33.09,343.90399201725694,0);
		pin(31.89,33.09,348.09003852888486,0);
		pin(33.51,34.71,51.068953700383354,0);
		pin(33.51,34.71,55.25500021201126,0);
		pin(33.51,34.71,59.441046723639175,0);
		pin(33.51,34.71,71.9991862585229,0);
		pin(33.51,34.71,76.18523277015079,0);
		pin(33.51,34.71,80.3712792817787,0);
		pin(33.51,34.71,84.5573257934066,0);
		pin(33.51,34.71,88.74337230503453,0);
		pin(33.51,34.71,92.92941881666242,0);
		pin(33.51,34.71,97.11546532829033,0);
		pin(33.51,34.71,101.30151183991825,0);
		pin(33.51,34.71,105.48755835154614,0);
		pin(33.51,34.71,109.67360486317406,0);
		pin(33.51,34.71,113.85965137480196,0);
		pin(33.51,34.71,118.04569788642986,0);
		pin(33.51,34.71,122.2317443980578,0);
		pin(33.51,34.71,126.4177909096857,0);
		pin(33.51,34.71,130.60383742131359,0);
		pin(33.51,34.71,134.7898839329415,0);
		pin(33.51,34.71,138.9759304445694,0);
		pin(33.51,34.71,143.16197695619735,0);
		pin(33.51,34.71,147.34802346782524,0);
		pin(33.51,34.71,151.53406997945314,0);
		pin(33.51,34.71,155.72011649108103,0);
		pin(33.51,34.71,222.69686067712755,0);
		pin(33.51,34.71,226.8829071887555,0);
		pin(33.51,34.71,235.2550002120113,0);
		pin(33.51,34.71,239.44104672363918,0);
		pin(33.51,34.71,247.81313974689505,0);
		pin(33.51,34.71,251.99918625852288,0);
		pin(33.51,34.71,256.18523277015083,0);
		pin(33.51,34.71,260.3712792817787,0);
		pin(33.51,34.71,264.5573257934066,0);
		pin(33.51,34.71,268.74337230503454,0);
		pin(33.51,34.71,272.9294188166624,0);
		pin(33.51,34.71,281.30151183991825,0);
		pin(33.51,34.71,306.4177909096857,0);
		pin(33.51,34.71,314.7898839329415,0);
		pin(33.51,34.71,318.9759304445694,0);
		pin(34.71,35.910000000000004,59.53618023544774,0);
		pin(34.71,35.910000000000004,63.72222674707563,0);
		pin(34.71,35.910000000000004,72.09431977033145,0);
		pin(34.71,35.910000000000004,76.28036628195935,0);
		pin(34.71,35.910000000000004,80.46641279358727,0);
		pin(34.71,35.910000000000004,84.65245930521516,0);
		pin(34.71,35.910000000000004,88.83850581684307,0);
		pin(34.71,35.910000000000004,93.02455232847099,0);
		pin(34.71,35.910000000000004,97.21059884009888,0);
		pin(34.71,35.910000000000004,101.3966453517268,0);
		pin(34.71,35.910000000000004,105.5826918633547,0);
		pin(34.71,35.910000000000004,109.76873837498262,0);
		pin(34.71,35.910000000000004,168.37338953777333,0);
		pin(34.71,35.910000000000004,172.55943604940123,0);
		pin(34.71,35.910000000000004,176.74548256102912,0);
		pin(34.71,35.910000000000004,180.93152907265707,0);
		pin(34.71,35.910000000000004,185.11757558428494,0);
		pin(34.71,35.910000000000004,189.30362209591286,0);
		pin(34.71,35.910000000000004,193.48966860754078,0);
		pin(34.71,35.910000000000004,201.8617616307966,0);
		pin(34.71,35.910000000000004,206.0478081424245,0);
		pin(34.71,35.910000000000004,210.2338546540524,0);
		pin(34.71,35.910000000000004,214.41990116568027,0);
		pin(34.71,35.910000000000004,218.60594767730822,0);
		pin(34.71,35.910000000000004,289.76873837498266,0);
		pin(34.71,35.910000000000004,293.9547848866105,0);
		pin(34.71,35.910000000000004,298.14083139823845,0);
		pin(34.71,35.910000000000004,302.32687790986637,0);
		pin(34.71,35.910000000000004,306.51292442149423,0);
		pin(34.71,35.910000000000004,310.69897093312215,0);
		pin(34.71,35.910000000000004,314.8850174447501,0);
		pin(34.71,35.910000000000004,323.2571104680059,0);
		pin(34.71,35.910000000000004,335.8152500028896,0);
		pin(34.71,35.910000000000004,340.00129651451755,0);
		pin(34.71,35.910000000000004,344.18734302614547,0);
		pin(34.71,35.910000000000004,348.3733895377733,0);
		pin(34.71,35.910000000000004,352.55943604940126,0);
		pin(36.224999999999994,37.425,197.82687280116826,0);
		pin(36.224999999999994,37.425,202.01291931279619,0);
		pin(36.224999999999994,37.425,227.12919838256363,0);
		pin(36.224999999999994,37.425,239.6873379174473,0);
		pin(36.224999999999994,37.425,248.05943094070315,0);
		pin(36.224999999999994,37.425,252.24547745233104,0);
		pin(36.224999999999994,37.425,260.61757047558683,0);
		pin(36.224999999999994,37.425,268.98966349884273,0);
		pin(36.224999999999994,37.425,281.5478030337264,0);
		pin(36.224999999999994,37.425,285.7338495453543,0);
		pin(36.224999999999994,37.425,289.9198960569822,0);
		pin(36.224999999999994,37.425,298.291989080238,0);
		pin(36.224999999999994,37.425,323.4082681500055,0);
		pin(36.224999999999994,37.425,335.96640768488913,0);
		pin(36.224999999999994,37.425,348.5245472197729,0);
		pin(36.224999999999994,37.425,352.7105937314008,0);
		pin(40.225,41.425000000000004,168.81411792760574,0);
		pin(40.225,41.425000000000004,177.18621095086152,0);
		pin(40.225,41.425000000000004,185.55830397411736,0);
		pin(40.225,41.425000000000004,193.93039699737315,0);
		pin(40.225,41.425000000000004,202.30249002062897,0);
		pin(40.225,41.425000000000004,210.6745830438848,0);
		pin(40.225,41.425000000000004,219.04667606714062,0);
		pin(40.225,41.425000000000004,227.41876909039647,0);
		pin(40.225,41.425000000000004,235.79086211365225,0);
		pin(40.225,41.425000000000004,248.34900164853596,0);
		pin(40.225,41.425000000000004,260.9071411834197,0);
		pin(40.225,41.425000000000004,269.2792342066755,0);
		pin(40.225,41.425000000000004,277.6513272299313,0);
		pin(40.225,41.425000000000004,286.0234202531871,0);
		pin(40.225,41.425000000000004,294.3955132764429,0);
		pin(40.225,41.425000000000004,302.7676062996987,0);
		pin(40.225,41.425000000000004,311.1396993229546,0);
		pin(40.225,41.425000000000004,319.51179234621037,0);
		pin(40.225,41.425000000000004,344.62807141597784,0);
		pin(41.8,43.0,173.1176815112859,0);
		pin(41.8,43.0,181.4897745345417,0);
		pin(41.8,43.0,189.86186755779752,0);
		pin(41.8,43.0,198.2339605810533,0);
		pin(41.8,43.0,206.60605360430912,0);
		pin(41.8,43.0,214.97814662756497,0);
		pin(41.8,43.0,223.35023965082078,0);
		pin(41.8,43.0,231.7223326740766,0);
		pin(41.8,43.0,240.09442569733238,0);
		pin(41.8,43.0,252.65256523221612,0);
		pin(41.8,43.0,265.21070476709986,0);
		pin(41.8,43.0,273.58279779035564,0);
		pin(41.8,43.0,281.9548908136114,0);
		pin(41.8,43.0,290.3269838368673,0);
		pin(41.8,43.0,298.6990768601231,0);
		pin(41.8,43.0,307.0711698833789,0);
		pin(41.8,43.0,315.4432629066347,0);
		pin(41.8,43.0,340.5595419764022,0);
		pin(41.8,43.0,348.93163499965794,0);
		pin(43.0,44.2,235.97036244954555,0);
		pin(43.0,44.2,248.52850198442925,0);
		pin(44.625,45.825,240.26247794962734,0);
		pin(44.625,45.825,257.006663996139,0);
		pin(48.555,49.755,211.15239086733445,0);
		pin(48.555,49.755,236.26866993710192,0);
		pin(48.555,49.755,244.6407629603577,0);
		pin(48.555,49.755,257.19890249524144,0);
		pin(48.555,49.755,273.943088541753,0);
		pin(48.555,49.755,294.87332109989256,0);
		pin(48.555,49.755,315.8035536580321,0);
		pin(50.114999999999995,51.315,215.41934512189675,0);
		pin(50.114999999999995,51.315,240.53562419166417,0);
		pin(50.114999999999995,51.315,253.09376372654793,0);
		pin(50.114999999999995,51.315,269.83794977305956,0);
		pin(50.114999999999995,51.315,286.5821358195712,0);
		pin(50.114999999999995,51.315,299.1402753544549,0);
		pin(51.315,52.515,219.64891326785366,0);
		pin(51.315,52.515,311.7419365236676,0);
		pin(52.91,54.11,307.6299384277816,0);

		title("Ringo_Starr_-_You're_Sixteen",0);

		pin(27.95,29.15,326.32528677148025,1);
		pin(27.95,29.15,317.9531937482244,1);
		pin(27.95,29.15,309.5811007249686,1);
		pin(27.95,29.15,301.2090077017128,1);
		pin(27.95,29.15,292.836914678457,1);
		pin(27.95,29.15,284.46482165520115,1);
		pin(27.95,29.15,276.09272863194536,1);
		pin(27.95,29.15,267.7206356086895,1);
		pin(27.95,29.15,259.34854258543373,1);
		pin(27.95,29.15,250.9764495621779,1);
		pin(27.95,29.15,242.6043565389221,1);
		pin(27.95,29.15,234.23226351566626,1);
		pin(27.95,29.15,225.86017049241048,1);
		pin(27.95,29.15,217.48807746915463,1);
		pin(27.95,29.15,209.11598444589882,1);
		pin(27.95,29.15,200.743891422643,1);
		pin(27.95,29.15,192.37179839938722,1);
		pin(27.95,29.15,183.9997053761314,1);
		pin(27.95,29.15,175.62761235287556,1);
		pin(27.95,29.15,167.25551932961974,1);
		pin(27.95,29.15,158.88342630636396,1);
		pin(27.95,29.15,154.697379794736,1);
		pin(27.95,29.15,146.32528677148022,1);
		pin(27.95,29.15,137.95319374822444,1);
		pin(27.95,29.15,129.58110072496862,1);
		pin(27.95,29.15,121.2090077017128,1);
		pin(27.95,29.15,112.83691467845696,1);
		pin(27.95,29.15,104.46482165520115,1);
		pin(27.95,29.15,96.09272863194536,1);
		pin(27.95,29.15,87.72063560868958,1);
		pin(27.95,29.15,79.34854258543373,1);
		pin(27.95,29.15,70.97644956217789,1);
		pin(27.95,29.15,62.604356538922104,1);
		pin(27.95,29.15,54.23226351566626,1);
		pin(27.95,29.15,45.860170492410475,1);
		pin(27.95,29.15,37.48807746915463,1);
		pin(27.95,29.15,29.115984445898846,1);
		pin(27.95,29.15,20.743891422643003,1);
		pin(27.95,29.15,12.371798399387217,1);
		pin(29.15,30.349999999999998,121.07411038717211,1);
		pin(30.69,31.89,325.97615670679085,1);
		pin(30.69,31.89,258.99941252074433,1);
		pin(30.69,31.89,192.0226683346978,1);
		pin(31.89,33.09,325.8634498432082,1);
		pin(31.89,33.09,191.90996147111514,1);
		pin(33.51,34.71,20.093836997291078,1);
		pin(34.71,35.910000000000004,53.48707557850577,1);
		pin(34.71,35.910000000000004,28.370796508738295,1);
		pin(34.71,35.910000000000004,19.99870348548245,1);
		pin(36.224999999999994,37.425,120.31266208255269,1);
		pin(36.224999999999994,37.425,19.84754580348283,1);
		pin(40.225,41.425000000000004,325.1393704444873,1);
		pin(40.225,41.425000000000004,90.72076579332452,1);
		pin(40.225,41.425000000000004,27.930068118905865,1);
		pin(41.8,43.0,191.06836500034203,1);
		pin(41.8,43.0,52.9288301166211,1);
		pin(41.8,43.0,19.440458023597785,1);
		pin(43.0,44.2,324.959870108594,1);
		pin(43.0,44.2,191.00638173650097,1);
		pin(43.0,44.2,52.86684685278004,1);
		pin(43.0,44.2,19.378474759756784,1);
		pin(44.625,45.825,257.8770569340936,1);
		pin(44.625,45.825,119.73752205037266,1);
		pin(44.625,45.825,27.64449879455867,1);
		pin(48.555,49.755,257.68481843499114,1);
		pin(48.555,49.755,19.080167272200413,1);
		pin(50.114999999999995,51.315,119.46437580833583,1);
		pin(51.315,52.515,324.5371332437743,1);
		pin(51.315,52.515,56.630156499588225,1);
		pin(51.315,52.515,18.955737894937045,1);
		pin(52.91,54.11,190.50959645593935,1);
		pin(52.91,54.11,27.253782502450917,1);
		pin(54.11,55.31,257.44719939619415,1);
		pin(56.9,58.1,328.50799653112597,1);
		pin(56.9,58.1,119.20567094973063,1);
		pin(56.9,58.1,102.46148490321895,1);
		pin(56.9,58.1,89.90334536833524,1);
		pin(56.9,58.1,77.34520583345153,1);
		pin(56.9,58.1,52.228926763684115,1);
		pin(56.9,58.1,18.7405546706608,1);

		title("Pink_Floyd_-_Comfortably_Numb",1);


	}
}

// Create the blank, ready for dynamically added pins
module createBlank() {

	difference() {

		// stock
		cylinder(h=hStock, r=rStock);

		// top cutout
		translate(v = [0,0,hStock-hInset+overlap]) {
			cylinder(h=hInset + overlap, r=rInset);
		}

		// Bottom cutout lets the disc sit flatter, but some printers my struggle with the overhang
		translate(v = [0,0,-overlap]) {
			cylinder(h=hInset + overlap, r=rInset);
		}

		// Centre hole
		cylinder(h=hStock, r=3.22);

		// Drive holes
		translate(v = [0,oDrive,0]) { cylinder(h=hStock, r=rDrive); }
		translate(v = [0,-oDrive,0]) { cylinder(h=hStock, r=rDrive); }
		translate(v = [oDrive,0,0]) { cylinder(h=hStock, r=rDrive); }
		translate(v = [-oDrive,0,0]) { cylinder(h=hStock, r=rDrive); }

		// Tracks - each one for two notes
		track(28.15, 0);
		track(30.89, 0);
		track(33.71, 0);
		track(36.425, 0);
		track(39.225, 0);
		track(42, 0);
		track(44.825, 0);
		track(47.555, 0);
		track(50.315, 0);
		track(53.11, 0);
		track(55.9, 0);

		if (hasSecondSide > 0) {
			track(28.15, 1);
			track(30.89, 1);
			track(33.71, 1);
			track(36.425, 1);
			track(39.225, 1);
			track(42, 1);
			track(44.825, 1);
			track(47.555, 1);
			track(50.315, 1);
			track(53.11, 1);
			track(55.9, 1);
		}
	}
}

// Negative for a double track
module track(inner, onSecondSide) {
	if (onSecondSide > 0) {
		translate(v = [0,0,-overlap]) {
			difference() {
				cylinder(h=hGroove+overlap, r=inner+2);
				cylinder(h=hGroove+overlap, r=inner);
			}
		}
	}
	else {
		translate(v = [0,0,hStock-hGroove]) {
			difference() {
				cylinder(h=hGroove+overlap, r=inner+2);
				cylinder(h=hGroove+overlap, r=inner);
			}
		}
	}

}

// Create a pin at a certain angle
module pin(inner, outer, angle, onSecondSide)
{
	rotate(a=angle) {
		if (onSecondSide > 0) {
			translate(v=[inner, -0.5, - overlap]) {
				# cube (size=[outer-inner, 1 ,hGroove + overlap], center=false);
			}
		} else {
			translate(v=[inner, -0.5, hStock - hGroove - overlap]) {
				# cube (size=[outer-inner, 1 ,hGroove + overlap], center=false);
			}
		}
	}
}

module title(text, onSecondSide)
{
	if (onSecondSide>0)
		writecylinder(text, [0,0,-hInset], radius=20, height=hStock-hInset, h=3, t=hInset, face="bottom");
	else
		writecylinder(text, [0,0,0], radius=20, height=hStock-hInset, h=3, t=hInset, face="top");
}



// Do the work
createDisc();
